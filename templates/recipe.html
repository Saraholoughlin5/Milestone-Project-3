{% extends "base.html" %}
{% block content %}

<div class="row card-panel recipespg">

    <div class="row card-panel">
        <h2 class="center-align brand-text pink-text text-lighten-1">Welcome to Kooky Recipes!</h2>
            <p class="main-text">Here you will find a variety of no-cook recipes that will encourage you and your children to prepare food in a fun, safe way.</p>
        <form action="{{ url_for('search') }}" method="post" class="col m12 l12">
            
                <div class="row input-field col s12 m12">
                    <i class="fas fa-search prefix pink-text"></i>
                    <input type="text" name="query" id="query" minlength="2" class="validate" required>
                    <label for="query">Search Recipes</label>
                </div>
                <div class="col s12 m12 center-align">
                    <span><a href="{{ url_for('get_recipe') }}" class="btn-small edit-btn white red-text">Clear</a></span>
                    <span><button type="submit" class="btn-small edit-btn white black-text">
                        Search
                    </button></span>
                </div>
            
        </form>
    </div>

    <h3 class="brand-text pink-text text-lighten-1 center-align">Kooky Recipes</h3>

    {% if recipe|length > 0 %}
    <ul class="collapsible">
        {% for recipe in recipe %}
        <li>
            <div class="collapsible-header teal-text text-lighten-1">
                <div class="col s1">
                    <i class="fas fa-caret-down"></i>
                </div>
                <div class="col s8 l10">{{ recipe.recipe_title }}
                    {% if recipe.has_allergens == "on" %}
                    <i class="fas fa-bell pink-text text-lighten-1 tooltipped" data-position="top"
                        data-tooltip="Contains allergens"></i>
                    {% endif %}
                </div>
                <div class="col s4 l2">
                    {% if session.user|lower == recipe.submitted_by|lower %}
                    <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}"
                        class="btn-small white black-text edit-btn">Edit</a>
                    {% endif %}
                </div>
            </div>
            <div class="collapsible-body white">
                <h5 class="teal-text text-lighten-1"><i class="fas fa-carrot prefix pink-text text-lighten-1"></i> &nbsp;Ingredients</h5>
                <p class="wrap">{{ recipe.ingredients }}</p>
                <h5 class="teal-text text-lighten-1"><i class="fas fa-utensil-spoon prefix pink-text text-lighten-1"></i> &nbsp;Materials</h5>
                <p class="wrap">{{ recipe.material_items }}</p>
                <h5 class="teal-text text-lighten-1"><i class="fas fa-list-ol prefix pink-text text-lighten-1"></i> &nbsp;Method</h5>
                <p class="wrap">{{ recipe.method }}</p>
                <span class="subhead1 teal-text text-lighten-1"><i class="fas fa-th-large prefix pink-text text-lighten-1"></i> &nbsp;Category:</span><span> {{ recipe.category }}</span>
                <div class="imgstyle">
                    <img class="responsive-img limit-height" src="{{ recipe.image_link }}" target="_blank">
                    <p class="sub-details">(Submitted by {{ recipe.submitted_by }} on {{ recipe.date_submitted }})</p>
                </div>
                
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
        <h3 class="center-align">The item you are searching for is not listed in any of these recipes</h3>
    {% endif %}
</div>
{% endblock %}