{% extends "base.html" %}
{% block content %}


<div class="card-panel row recipespg">
    <h3 class="center-align brand-text pink-text text-lighten-1">
                {{ username }}'s page
            </h3>
            <div class="row card-panel">
            <p class="main-text">Welcome to your Kooky profile page. Here, you can view and delete any recipes you have submitted.</br>
            To submit a recipe, please click on the 'Add Recipe' link in the menu - this will display the recipe 
                submission form. To edit your submitted recipes, please click on the 'Edit' button, on this page, or on the homepage. You can only remove recipes via the 'Delete' button for your recipes on this page.</br>
            Happy non-cooking!</p>
            </div>
   

    <ul class="collapsible">
        {% for recipe in recipe %}
        {% if username|lower == recipe.submitted_by %}
	        <li>
            <div class="collapsible-header pink-text text-lighten-1">
                <div class="col s1">
                    <i class="fas fa-caret-down"></i>
                </div>
                <div class="col s5 m6 l6 xl8">{{ recipe.recipe_title }}
                    {% if recipe.has_allergens == "on" %}
                    <i class="fas fa-exclamation teal-text text-lighten-1 tooltipped" data-position="top"
                        data-tooltip="Contains allergens"></i>
                    {% endif %}
                </div>
                <div class="col s7 m6 l6 xl4">
                    {% if session.user|lower == recipe.submitted_by|lower %}
                    <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}"
                        class="btn-small white black-text edit-btn">Edit</a>
                    {% endif %}
                    {% if session.user|lower == recipe.submitted_by|lower %}
                <a data-target="{{ recipe._id}}" class="btn-small modal-trigger white black-text edit-btn">Delete</a>
                {% endif %}
                </div>
            </div>

            <div id="{{ recipe._id }}" class="modal">
                <div class="modal-content">
                    <h4>Confirm Delete</h4>
                    <p>Are you sure you want to permanently delete this recipe from Kooky?</p>
                </div>
            <div class="modal-footer">
                {% if session.user|lower == recipe.submitted_by|lower %}
                <a href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}" class="modal-close white red-text btn-small edit-btn">Delete</a>
                {% endif %}
                <a class="modal-close white black-text btn-small edit-btn">Cancel</a>
            </div>
        </div>
            <div class="collapsible-body white">
                <h5 class="teal-text text-lighten-1">Ingredients</h5>
                <p class="wrap">{{ recipe.ingredients }}</p>
                <h5 class="teal-text text-lighten-1">Materials</h5>
                <p class="wrap">{{ recipe.material_items }}</p>
                <h5 class="teal-text text-lighten-1">Method</h5>
                <p class="wrap">{{ recipe.method }}</p>
                <span class="subhead1 teal-text text-lighten-1">Category:</span><span> {{ recipe.category }}</span>
                <div class="imgstyle">
                    <img class="responsive-img limit-height" src="{{ recipe.image_link }}" target="_blank">
                    <p class="sub-details">(Submitted by {{ recipe.submitted_by }} on {{ recipe.date_submitted }})</p>
                </div>
                
            </div>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</div>

{% endblock %}